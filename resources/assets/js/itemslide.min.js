function matrixToArray(a){return a.substr(7,a.length-8).split(", ")}function easeOutBack(a,b,c,d,e){return void 0==e&&(e=1.70158),c*((a=a/d-1)*a*((e+1)*a+e)+1)+b}function slideout(a,b){function c(){if(n=Date.now()-g,m)$(".itemslide_slideoutwrap").translate3d(0,h-easeOutBack(n,0,h-f,250,0)),a.savedSlide.css("opacity",k-easeOutBack(n,0,k-0,250,0)*(l?-1:1));else{if(l)return $(".itemslide_slideoutwrap").children().unwrap(),$(".itemslide_move").children().unwrap(),isExplorer&&a.children().css("height",""),a.end_animation=!0,void(n=0);$(".itemslide_move").translate3d(0-easeOutBack(n-250,0,0+a.savedSlide.width(),125,0)*(p?-1:1))}return 1==o&&($(".itemslide_slideoutwrap").children().unwrap(),a.savedSlideIndex==a.data("vars").currentIndex&&$(".itemslide_move").children(":nth-child(1)").attr("class","itemslide-active"),a.savedSlideIndex!=a.children().length-1||p||a.savedSlideIndex!=a.data("vars").currentIndex||(b.duration=200,a.gotoSlide(a.children().length-2)),0==a.savedSlideIndex&&0!=a.data("vars").currentIndex&&(n=500),o=-1),n>=250&&(m=!1,-1!=o&&(o=1),n>=375)?($(".itemslide_move").children().unwrap(),a.removeSlide(d.index()),(0==a.savedSlideIndex&&0!=a.data("vars").currentIndex||p)&&a.gotoWithoutAnimation(a.data("vars").currentIndex-1),b.duration=j,n=0,void(a.end_animation=!0)):void(i=requestAnimationFrame(c))}var d,e,f=-400,g=Date.now(),h=0,i=0,j=0,k=0;a.end_animation=!0;var l=!1;a.swipeOut=function(){h=$(".itemslide_slideoutwrap").translate3d().y,e=0>h,f=e?-400:400,Math.abs(0-h)<50?(l=!0,f=0):(l=!1,a.trigger({type:"swipeout",slide:a.savedSlideIndex})),o=0,j=b.duration,d=a.savedSlide,g=Date.now(),k=a.savedSlide.css("opacity"),a.savedSlideIndex<a.data("vars").currentIndex?(p=!0,a.children(":nth-child(-n+"+(a.savedSlideIndex+1)+")").wrapAll("<div class='itemslide_move' />")):(p=!1,a.children(":nth-child(n+"+(a.savedSlideIndex+2)+")").wrapAll("<div class='itemslide_move' />")),m=!0,a.end_animation=!1,i=requestAnimationFrame(c)};var m=!0,n=0,o=0,p=!1}var isExplorer=!1||!!document.documentMode;$(function(){"use strict";$.fn.itemslide=function(a){function b(a){if("touchmove"==a.type?(s=null==$.fn.jquery?a.changedTouches[0]:a.originalEvent.touches[0]||a.originalEvent.changedTouches[0],Math.abs(s.pageX-u)>10&&(w=1),w&&a.preventDefault()):(s=a,a.preventDefault()),k=-(s.pageX-u)>0?1:-1,f()?y&&(z=s.pageX,y=0):(y||(p.currentLandPos=p.translate3d().x,u=s.pageX),y=1),1==A&&(isExplorer&&p.children().css("height",p.data("vars").slideHeight),p.savedSlide.wrapAll("<div class='itemslide_slideoutwrap' />"),A=-1),Math.abs(s.pageX-u)>6&&(!n&&p.end_animation&&(o=!0),cancelAnimationFrame(j)),Math.abs(s.pageY-v)>6&&!o&&p.end_animation&&(n=!0),o){if(r.disable_slide)return;n=!1,p.translate3d((0==y?z-u+(s.pageX-z)/4:s.pageX-u)+p.currentLandPos),p.trigger("changePos"),p.trigger("pan")}else n&&r.swipe_out&&(a.preventDefault(),$(".itemslide_slideoutwrap").translate3d(0,s.pageY-v),-1!=A&&(A=1))}function c(a){p.children(":nth-child("+(p.data("vars").currentIndex+1||0)+")").attr("class",""),p.children(":nth-child("+(a+1||0)+")").attr("class","itemslide-active"),a!=r.currentIndex&&(p.data("vars").currentIndex=a,p.trigger("changeActiveIndex"))}function d(a){for(var b=0;b<p.children("li").length;b++)if(p.children().cwidth()*b+p.children().cwidth()/2-p.children().cwidth()*r.pan_threshold*k-e(0)>a)return r.one_item?b!=p.data("vars").currentIndex?p.data("vars").currentIndex+1*k:p.data("vars").currentIndex:b;return r.one_item?p.data("vars").currentIndex+1:p.children("li").length-1}function e(a){return-(a*p.children().cwidth()-(p.parent().cwidth()-p.children().cwidth())/2)}function f(){return Math.floor(p.translate3d().x)>e(0)&&-1==k||Math.ceil(p.translate3d().x)<e(p.children("li").length-1)&&1==k}function g(a){a>=p.children("li").length-1||0>=a?(l=!0,a=Math.min(Math.max(a,0),p.children("li").length-1)):l=!1,c(a),D=Math.max(r.duration-1920/$(window).width()*Math.abs(p.data("vars").velocity)*9*(r.duration/230)-(f()?m/15:0)*(r.duration/230),50),C=l?250*Math.abs(p.data("vars").velocity)/$(window).width():0,i=p.translate3d().x,p.currentLandPos=e(a),cancelAnimationFrame(j),E=Date.now(),j=requestAnimationFrame(h)}function h(){var a=Date.now()-E;return p.trigger("changePos"),p.translate3d(i-easeOutBack(a,0,i-p.currentLandPos,D,C)),a>=D?void p.translate3d(p.currentLandPos):void(j=requestAnimationFrame(h))}var i=0,j=0,k=0,l=!1,m=0,n=!1,o=!1,p=this,q={duration:350,swipe_sensitivity:150,disable_slide:!1,disable_clicktoslide:!1,disable_scroll:!1,start:0,one_item:!1,pan_threshold:.3,disable_autowidth:!1,parent_width:!1,swipe_out:!1},r=$.extend({},q,a);r.parent_width&&p.children().width(p.parent().cwidth()),this.data("vars",{currentIndex:0,disable_autowidth:r.disable_autowidth,parent_width:r.parent_width,velocity:0,slideHeight:p.children().height()}),p.end_animation=!0,r.swipe_out&&slideout(p,r),p.css({"touch-action":"pan-y","-webkit-user-select":"none","-webkit-touch-callout":"none","-webkit-user-drag":"none","-webkit-tap-highlight-color":"rgba(0, 0, 0, 0)"}),r.disable_autowidth||p.css("width",p.children("li").length*p.children().cwidth()+10),p.translate3d(0),g(r.start);var s,t=!1,u=0,v=0,w=!1,x=0;p.savedSlideIndex=0,p.on("mousedown touchstart","li",function(a){s="touchstart"==a.type?null==$.fn.jquery?a.changedTouches[0]:a.originalEvent.touches[0]||a.originalEvent.changedTouches[0]:a,p.end_animation&&(x=Date.now(),t=1,w=0,u=s.pageX,v=s.pageY,n=!1,o=!1,p.savedSlide=$(this),p.savedSlideIndex=p.savedSlide.index(),A=0,$(window).on("mousemove touchmove",b),window.getSelection?window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().removeAllRanges():document.selection&&document.selection.empty())});var y=!0,z=0,A=0;$(window).on("mouseup touchend",function(a){if(t){if(s="touchend"==a.type?null==$.fn.jquery?a.changedTouches[0]:a.originalEvent.touches[0]||a.originalEvent.changedTouches[0]:a,t=!1,$(window).off("mousemove touchmove"),n&&r.swipe_out)return n=!1,void p.swipeOut();if(p.end_animation&&!r.disable_slide){var b=Date.now()-x;if(p.data("vars").velocity=-(s.pageX-u)/b,k=p.data("vars").velocity>0?1:-1,m=(s.pageX-u)*k*-1,(s.pageX-u)*k<-6)return void g(d(p.data("vars").velocity*r.swipe_sensitivity-p.translate3d().x))}p.savedSlide.index()==p.data("vars").currentIndex||r.disable_clicktoslide||(a.preventDefault(),g(p.savedSlide.index()))}});try{p.mousewheel(function(a){if(!r.disable_scroll&&!n){a.preventDefault();var b=p.data("vars").currentIndex-((0==a.deltaX?a.deltaY:a.deltaX)>0?1:-1);if(b>=p.children("li").length||0>b)return;p.data("vars").velocity=0,g(b)}})}catch(B){}p.on("gotoSlide",function(a,b){b.el.get(0)==$(this).get(0)&&g(b.i)});var C=0,D=r.duration,E=Date.now();p.gotoWithoutAnimation=function(a){p.data("vars").currentIndex=a,p.currentLandPos=e(a),p.translate3d(e(a))}},$.fn.gotoSlide=function(a){this.trigger("gotoSlide",{i:a,el:$(this)})},$.fn.next=function(){this.gotoSlide(this.data("vars").currentIndex+1)},$.fn.previous=function(){this.gotoSlide(this.data("vars").currentIndex-1)},$.fn.reload=function(){this.data("vars").parent_width&&this.children().width(this.parent().cwidth()),this.data("vars").disable_autowidth||this.css("width",this.children("li").length*this.children().cwidth()+10),this.data("vars").slideHeight=this.children().height(),this.data("vars").velocity=0,this.gotoSlide(this.data("vars").currentIndex)},$.fn.addSlide=function(a){this.append("<li>"+a+"</li>"),this.reload()},$.fn.removeSlide=function(a){this.children(":nth-child("+(a+1||0)+")").remove()},$.fn.getActiveIndex=function(){return this.data("vars").currentIndex},$.fn.getCurrentPos=function(){return this.translate3d().x},$.fn.translate3d=function(a,b){if(null==a){var c=matrixToArray(this.css("transform"));if(null!=$.fn.jquery)return{x:parseFloat(isExplorer?c[12]:c[4]),y:parseFloat(isExplorer?c[13]:c[5])};var d=this.css("transform").replace("translate3d","").replace("(","").replace(")","").replace(" ","").replace("px","").split(",");return{x:parseFloat(d[0]),y:parseFloat(d[1])}}this.css("transform","translate3d("+a+"px,"+(b||0)+"px, 0px)")},$.fn.cwidth=function(){return parseInt(this.css("width").replace("px",""))}});
